# ğŸ¯ Guardian ä½¿ç”¨è¯´æ˜ - ä¿®å¤ç‰ˆ

**é—®é¢˜å·²ä¿®å¤ï¼š** 
- âœ… ä¿®å¤äº†æŒ‰é’®ç‚¹å‡»æ— æ•ˆçš„é—®é¢˜
- âœ… æ·»åŠ äº†è¯¦ç»†çš„é”™è¯¯æç¤º
- âœ… æ·»åŠ äº†è¿è§„æ“ä½œè®°å½•åŠŸèƒ½

---

## ğŸ”„ é‡æ–°å®‰è£…æ’ä»¶ï¼ˆå¿…é¡»ï¼ï¼‰

ç”±äºä¿®æ”¹äº†ä»£ç ï¼Œéœ€è¦é‡æ–°åŠ è½½æ’ä»¶ï¼š

### æ­¥éª¤1ï¼šåˆ·æ–°æ’ä»¶

1. æ‰“å¼€ `chrome://extensions/`
2. æ‰¾åˆ° **Guardian - æµè§ˆå™¨ä¿æŠ¤åŠ©æ‰‹**
3. ç‚¹å‡»ã€ŒğŸ”„ã€ï¼ˆåˆ·æ–°å›¾æ ‡ï¼‰
4. æˆ–è€…ç‚¹å‡»ã€Œç§»é™¤ã€åé‡æ–°åŠ è½½

### æ­¥éª¤2ï¼šéªŒè¯å®‰è£…

ç¡®è®¤ï¼š
- âœ… æ’ä»¶çŠ¶æ€ï¼šå·²å¯ç”¨
- âœ… æ²¡æœ‰é”™è¯¯æç¤º
- âœ… ç‰ˆæœ¬ï¼š1.0.0

---

## ğŸ¯ æ­£ç¡®çš„ä½¿ç”¨æ­¥éª¤

### æµ‹è¯•æ‹¦æˆªåŠŸèƒ½ï¼ˆå®Œæ•´æ­¥éª¤ï¼‰

**â‘  æ‰“å¼€Bç«™**
```
åœ¨æµè§ˆå™¨æ‰“å¼€ï¼šwww.bilibili.com
ï¼ˆåº”è¯¥èƒ½æ­£å¸¸è®¿é—®ï¼‰
```

**â‘¡ ç‚¹å‡»æ’ä»¶å›¾æ ‡**
```
ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„ Guardian å›¾æ ‡
ï¼ˆå¦‚æœçœ‹ä¸åˆ°ï¼Œç‚¹å‡»æ‹¼å›¾å›¾æ ‡æ‰¾å®ƒï¼‰
```

**â‘¢ å…ˆå¯ç”¨ä¿æŠ¤**
```
åœ¨å¼¹çª—ä¸­ï¼š
1. æŠŠã€Œå¯ç”¨ä¿æŠ¤ã€å¼€å…³æ‹–åˆ°å³è¾¹ï¼ˆå˜ç»¿è‰²ï¼‰
2. çœ‹åˆ°å³ä¸Šè§’çŠ¶æ€å˜æˆã€Œå·²å¯ç”¨ã€ï¼ˆç»¿ç‚¹ï¼‰
```

**â‘£ åŠ å…¥é»‘åå•**
```
1. ç¡®è®¤æ˜¾ç¤ºï¼šwww.bilibili.com
2. ç‚¹å‡»ã€ŒğŸš« åŠ å…¥é»‘åå•ã€æŒ‰é’®
3. ç­‰å¾…2ç§’
4. åº”è¯¥çœ‹åˆ°ç»¿è‰²æç¤ºã€Œâœ… å·²åŠ å…¥é»‘åå•ã€
```

**â‘¤ åˆ·æ–°é¡µé¢æµ‹è¯•**
```
1. å…³é—­å¼¹çª—
2. æŒ‰ F5 åˆ·æ–° Bç«™é¡µé¢
3. åº”è¯¥çœ‹åˆ°ç´«è‰²æ¸å˜çš„æ‹¦æˆªé¡µé¢ï¼
```

---

## ğŸ› è°ƒè¯•æ–¹æ³•ï¼ˆå¦‚æœæŒ‰é’®è¿˜æ˜¯ä¸å¥½ç”¨ï¼‰

### æ–¹æ³•1ï¼šæ‰“å¼€æ§åˆ¶å°çœ‹æ—¥å¿—

**â‘  æ‰“å¼€æ’ä»¶çš„Service Workeræ§åˆ¶å°**
```
1. æ‰“å¼€ chrome://extensions/
2. æ‰¾åˆ° Guardian
3. ç‚¹å‡»ã€ŒService Workerã€ï¼ˆè“è‰²é“¾æ¥ï¼‰
4. ä¼šæ‰“å¼€å¼€å‘è€…å·¥å…·
```

**â‘¡ æ‰“å¼€å¼¹çª—æ§åˆ¶å°**
```
1. å³é”®ç‚¹å‡» Guardian å›¾æ ‡
2. é€‰æ‹©ã€Œæ£€æŸ¥å¼¹å‡ºå†…å®¹ã€
3. ä¼šæ‰“å¼€å¼¹çª—çš„å¼€å‘è€…å·¥å…·
```

**â‘¢ ç‚¹å‡»æŒ‰é’®ï¼Œè§‚å¯Ÿæ§åˆ¶å°**
```
ç‚¹å‡»ã€ŒåŠ å…¥é»‘åå•ã€æ—¶ï¼Œæ§åˆ¶å°åº”è¯¥æ˜¾ç¤ºï¼š
- "ç‚¹å‡»åŠ å…¥é»‘åå•ï¼Œå½“å‰åŸŸå: bilibili.com"
- "åå°å“åº”: {success: true}"
- "[Toast] âœ… å·²åŠ å…¥é»‘åå•"

å¦‚æœæœ‰çº¢è‰²é”™è¯¯ï¼Œå‘Šè¯‰æˆ‘é”™è¯¯å†…å®¹ï¼
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨æµ‹è¯•ï¼ˆç»•è¿‡æŒ‰é’®ï¼‰

**åœ¨Service Workeræ§åˆ¶å°ä¸­ç›´æ¥è¿è¡Œï¼š**

```javascript
// æŸ¥çœ‹å½“å‰é…ç½®
chrome.storage.local.get('guardian_config', (data) => {
  console.log('å½“å‰é…ç½®:', data);
});

// æ‰‹åŠ¨æ·»åŠ é»‘åå•å¹¶å¯ç”¨
chrome.storage.local.set({
  guardian_config: {
    enabled: true,
    mode: 'blacklist',
    blacklist: ['bilibili.com', 'www.bilibili.com'],
    whitelist: [],
    timeControl: { enabled: false, schedules: [] },
    dailyLimit: { 
      enabled: false, 
      maxMinutes: 120, 
      usedMinutes: 0,
      lastResetDate: new Date().toISOString().split('T')[0]
    },
    tempPass: { active: false, domain: null, expiresAt: null },
    stats: { 
      todayBlocked: 0, 
      totalBlocked: 0, 
      todayAllowed: 0,
      lastResetDate: new Date().toISOString().split('T')[0]
    },
    violationLogs: [],
    userInfo: { userId: null, username: null, bindTime: null },
    password: null,
    firstInstall: false
  }
}, () => {
  console.log('âœ… é…ç½®å·²æ‰‹åŠ¨è®¾ç½®');
  alert('é»‘åå•å·²æ·»åŠ ï¼åˆ·æ–°Bç«™é¡µé¢è¯•è¯•');
});
```

**ç„¶ååˆ·æ–°Bç«™é¡µé¢ï¼ˆF5ï¼‰ï¼Œåº”è¯¥è¢«æ‹¦æˆªï¼**

---

## ğŸ“‹ è¿è§„æ“ä½œè®°å½•åŠŸèƒ½è¯´æ˜

æˆ‘å·²ç»æ·»åŠ äº†è¿è§„ç›‘æ§åŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨è®°å½•ï¼š

### è‡ªåŠ¨è®°å½•çš„æ“ä½œ

| æ“ä½œç±»å‹ | è§¦å‘æ—¶æœº | ä¸¥é‡ç¨‹åº¦ |
|---------|---------|---------|
| **protection_disabled** | ç”¨æˆ·å…³é—­ä¿æŠ¤å¼€å…³ | ğŸ”´ é«˜å± |
| **plugin_disabled** | åœ¨æ‰©å±•ç®¡ç†é¡µé¢ç¦ç”¨æ’ä»¶ | ğŸ”´ é«˜å± |
| **plugin_uninstalled** | å¸è½½æ’ä»¶ | ğŸ”´ é«˜å± |
| **plugin_suspending** | æ’ä»¶å³å°†åœæ­¢ï¼ˆå¸è½½å‰ï¼‰ | ğŸ”´ é«˜å± |
| **temp_pass_granted** | ç”³è¯·ä¸´æ—¶é€šè¡Œè¯ | ğŸŸ¡ è­¦å‘Š |

### è®°å½•çš„ä¿¡æ¯

æ¯æ¡è¿è§„è®°å½•åŒ…å«ï¼š
- ğŸ‘¤ **ç”¨æˆ·ä¿¡æ¯**ï¼šç”¨æˆ·IDã€ç”¨æˆ·å
- ğŸ” **æ“ä½œç±»å‹**ï¼šå…·ä½“åšäº†ä»€ä¹ˆ
- ğŸ“ **æè¿°**ï¼šè¯¦ç»†è¯´æ˜
- â° **æ—¶é—´**ï¼šç²¾ç¡®åˆ°ç§’

### æŸ¥çœ‹è¿è§„è®°å½•

**æ–¹å¼1ï¼šç®¡ç†åå°**
```
1. æ‰“å¼€ http://localhost:8888
2. å·¦ä¾§ç‚¹å‡»ã€Œâš ï¸ è¿è§„è®°å½•ã€
3. æŸ¥çœ‹æ‰€æœ‰è®°å½•
4. å¯å¯¼å‡ºCSVæ–‡ä»¶
```

**æ–¹å¼2ï¼šæ§åˆ¶å°æŸ¥çœ‹**
```javascript
// åœ¨Service Workeræ§åˆ¶å°è¿è¡Œ
chrome.storage.local.get('violationLogs', (data) => {
  console.table(data.violationLogs);
});
```

---

## ğŸ¯ ç»‘å®šç”¨æˆ·ä¿¡æ¯ï¼ˆé‡è¦ï¼ï¼‰

ä¸ºäº†è®°å½•"æ˜¯è°"æ“ä½œçš„ï¼Œéœ€è¦å…ˆç»‘å®šç”¨æˆ·ï¼š

### æ–¹å¼1ï¼šåœ¨æ’ä»¶ä¸­ç»‘å®š

**åœ¨Service Workeræ§åˆ¶å°è¿è¡Œï¼š**

```javascript
chrome.runtime.sendMessage({
  action: 'bindUser',
  data: {
    userId: 'å­¦å·æˆ–ID',
    username: 'å­¦ç”Ÿå§“å'
  }
}, (response) => {
  console.log('ç»‘å®šç»“æœ:', response);
  alert('ç”¨æˆ·ç»‘å®šæˆåŠŸï¼');
});
```

### æ–¹å¼2ï¼šé›†æˆåˆ°MetaSeekOJ

åœ¨è¯¾å ‚é¡µé¢è‡ªåŠ¨ç»‘å®šï¼š

```javascript
// OnlineJudgeFE è¯¾å ‚é¡µé¢
window.dispatchEvent(new CustomEvent('guardian-bind-user', {
  detail: {
    userId: this.$store.getters.user.id,
    username: this.$store.getters.user.real_name
  }
}));
```

---

## âœ… å®Œæ•´æµ‹è¯•æµç¨‹

### æµ‹è¯•1ï¼šåŸºæœ¬æ‹¦æˆª

```bash
# 1. åˆ·æ–°æ’ä»¶
chrome://extensions/ â†’ æ‰¾åˆ°Guardian â†’ ç‚¹å‡»åˆ·æ–°å›¾æ ‡

# 2. åœ¨Service Workeræ§åˆ¶å°æ‰‹åŠ¨é…ç½®
chrome.storage.local.set({
  guardian_config: {
    enabled: true,
    mode: 'blacklist',
    blacklist: ['bilibili.com'],
    whitelist: [],
    stats: { todayBlocked: 0, totalBlocked: 0, todayAllowed: 0 }
  }
});

# 3. è®¿é—®Bç«™
www.bilibili.com â†’ åº”è¯¥è¢«æ‹¦æˆª

# 4. æ£€æŸ¥ç»Ÿè®¡
ç‚¹å‡»æ’ä»¶å›¾æ ‡ â†’ ä»Šæ—¥æ‹¦æˆªåº”è¯¥æ˜¾ç¤º 1
```

### æµ‹è¯•2ï¼šè¿è§„è®°å½•

```bash
# 1. ç‚¹å‡»æ’ä»¶å›¾æ ‡ï¼Œå…³é—­ä¿æŠ¤å¼€å…³
â†’ è¿è§„è®°å½•ï¼šprotection_disabled

# 2. chrome://extensions/ ç¦ç”¨Guardian
â†’ è¿è§„è®°å½•ï¼šplugin_disabled

# 3. æŸ¥çœ‹è®°å½•
ç®¡ç†åå° â†’ è¿è§„è®°å½• â†’ çœ‹åˆ°2æ¡è®°å½•
```

---

## ğŸ“ å¦‚æœæŒ‰é’®è¿˜æ˜¯ä¸å¥½ç”¨

è¯·å‘Šè¯‰æˆ‘ï¼š

1. **æ§åˆ¶å°æœ‰ä»€ä¹ˆé”™è¯¯ï¼Ÿ**
   - æ‰“å¼€å¼¹çª—æ§åˆ¶å°ï¼ˆå³é”®æ’ä»¶å›¾æ ‡â†’æ£€æŸ¥å¼¹å‡ºå†…å®¹ï¼‰
   - ç‚¹å‡»æŒ‰é’®
   - å¤åˆ¶çº¢è‰²é”™è¯¯ä¿¡æ¯

2. **ç‚¹å‡»åæœ‰ä»€ä¹ˆååº”ï¼Ÿ**
   - å®Œå…¨æ²¡ååº”ï¼Ÿ
   - è¿˜æ˜¯æœ‰é”™è¯¯æç¤ºï¼Ÿ

3. **å½“å‰åŸŸåæ˜¾ç¤ºä»€ä¹ˆï¼Ÿ**
   - åœ¨å¼¹çª—ä¸­èƒ½çœ‹åˆ° bilibili.com å—ï¼Ÿ

æˆ‘ä¼šæ ¹æ®æ‚¨çš„åé¦ˆç»§ç»­ä¿®å¤ï¼

---

**ç«‹å³å°è¯•ï¼šåˆ·æ–°æ’ä»¶åé‡æ–°æµ‹è¯•** ğŸ”„

